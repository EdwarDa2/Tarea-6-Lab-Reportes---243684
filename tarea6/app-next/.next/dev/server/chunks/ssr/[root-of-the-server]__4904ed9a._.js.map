{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\r\n\r\nlet connectionString = process.env.DATABASE_URL;\r\n\r\nif (!connectionString) {\r\n  connectionString = 'postgres://postgres:postgres@localhost:5432/actividad_db';\r\n}\r\n\r\n\r\n\r\nconst pool = new Pool({\r\n  connectionString,\r\n});\r\n\r\nexport const query = async (text: string, params?: any[]) => {\r\n  try {\r\n    const res = await pool.query(text, params);\r\n    return res;\r\n  } catch (error) {\r\n    console.error('❌ Error ejecutando query:', text);\r\n    throw error;\r\n  }\r\n};"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,IAAI,mBAAmB,QAAQ,GAAG,CAAC,YAAY;AAE/C,IAAI,CAAC,kBAAkB;IACrB,mBAAmB;AACrB;AAIA,MAAM,OAAO,IAAI,qJAAI,CAAC;IACpB;AACF;AAEO,MAAM,QAAQ,OAAO,MAAc;IACxC,IAAI;QACF,MAAM,MAAM,MAAM,KAAK,KAAK,CAAC,MAAM;QACnC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,MAAM;IACR;AACF"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/reports/3/page.tsx"],"sourcesContent":["import { query } from '../../lib/db';\r\nimport Link from 'next/link';\r\n\r\ninterface StockProducto {\r\n  codigo: string;\r\n  nombre: string;\r\n  stock: number;\r\n  total_historico_ventas: number;\r\n  salud_inventario: string;\r\n}\r\n\r\nasync function getStockCritico() {\r\n  const result = await query(\"SELECT * FROM vw_stock_critico ORDER BY stock ASC\");\r\n  return result.rows as StockProducto[];\r\n}\r\n\r\nexport default async function Reporte3() {\r\n  const productos = await getStockCritico();\r\n\r\n  return (\r\n    <main>\r\n      <Link href=\"/\" style={{ color: 'blue', marginBottom: '20px', display: 'block' }}>← Volver al Dashboard</Link>\r\n      \r\n      <h1>Reporte 3: Alerta de Stock</h1>\r\n      <p>Productos con niveles bajos de inventario (Lógica CASE).</p>\r\n\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Código</th>\r\n            <th>Producto</th>\r\n            <th>Stock Actual</th>\r\n            <th>Estado</th>\r\n            <th>Ventas Históricas</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {productos.map((p, i) => (\r\n            <tr key={i}>\r\n              <td>{p.codigo}</td>\r\n              <td>{p.nombre}</td>\r\n              <td style={{ fontWeight: 'bold' }}>{p.stock}</td>\r\n              <td>\r\n                <span style={{\r\n                  color: p.salud_inventario === 'Agotado' ? 'red' : \r\n                         p.salud_inventario === 'Crítico' ? 'orange' : 'green',\r\n                  fontWeight: 'bold'\r\n                }}>\r\n                  {p.salud_inventario}\r\n                </span>\r\n              </td>\r\n              <td>{p.total_historico_ventas}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;;;;AAUA,eAAe;IACb,MAAM,SAAS,MAAM,IAAA,gIAAK,EAAC;IAC3B,OAAO,OAAO,IAAI;AACpB;AAEe,eAAe;IAC5B,MAAM,YAAY,MAAM;IAExB,qBACE,8OAAC;;0BACC,8OAAC,0LAAI;gBAAC,MAAK;gBAAI,OAAO;oBAAE,OAAO;oBAAQ,cAAc;oBAAQ,SAAS;gBAAQ;0BAAG;;;;;;0BAEjF,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;0BAAE;;;;;;0BAEH,8OAAC;;kCACC,8OAAC;kCACC,cAAA,8OAAC;;8CACC,8OAAC;8CAAG;;;;;;8CACJ,8OAAC;8CAAG;;;;;;8CACJ,8OAAC;8CAAG;;;;;;8CACJ,8OAAC;8CAAG;;;;;;8CACJ,8OAAC;8CAAG;;;;;;;;;;;;;;;;;kCAGR,8OAAC;kCACE,UAAU,GAAG,CAAC,CAAC,GAAG,kBACjB,8OAAC;;kDACC,8OAAC;kDAAI,EAAE,MAAM;;;;;;kDACb,8OAAC;kDAAI,EAAE,MAAM;;;;;;kDACb,8OAAC;wCAAG,OAAO;4CAAE,YAAY;wCAAO;kDAAI,EAAE,KAAK;;;;;;kDAC3C,8OAAC;kDACC,cAAA,8OAAC;4CAAK,OAAO;gDACX,OAAO,EAAE,gBAAgB,KAAK,YAAY,QACnC,EAAE,gBAAgB,KAAK,YAAY,WAAW;gDACrD,YAAY;4CACd;sDACG,EAAE,gBAAgB;;;;;;;;;;;kDAGvB,8OAAC;kDAAI,EAAE,sBAAsB;;;;;;;+BAbtB;;;;;;;;;;;;;;;;;;;;;;AAoBrB"}}]
}